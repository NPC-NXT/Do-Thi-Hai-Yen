<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Floating Hearts ‚Äî ‚ù§Ô∏è</title>
  <style>
    :root{
      --bg-1:#0b0710;
      --bg-2:#12081a;
      --accent:#ff6b9a;
      --text:#fff;
    }
    html,body{height:100%;margin:0;font-family:Inter, system-ui, Arial, sans-serif;background:linear-gradient(180deg,var(--bg-1),var(--bg-2));overflow:hidden;color:var(--text)}
    .center {
      position: absolute;
      left:50%;
      top:46%;
      transform:translate(-50%,-50%);
      text-align:center;
      z-index: 10;
      padding: 36px 44px;
      border-radius: 14px;
      backdrop-filter: blur(6px);
      background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));
      box-shadow: 0 18px 50px rgba(2,6,23,0.6);
      min-width: 280px;
      max-width: 1000px;
    }
    .center h1{
      margin:0 0 10px 0;
      font-size: clamp(28px, 6vw, 56px);
      letter-spacing: -0.02em;
      color: white;
      line-height:1.02;
    }
    .subtitle{ margin:0; color:rgba(255,255,255,0.78); font-size:14px; opacity:0.8; }
    .footer{ margin:8px 0 0; color:rgba(255,255,255,0.65); font-size:12px; opacity:0.7; }
    /* HEARTS */
    .heart {
      position: fixed;
      will-change: transform, opacity;
      pointer-events: none;
      z-index: 6;
      font-size: 28px;
      opacity: 0;
      transform-origin: center;
      animation: floatUp linear forwards;
      text-shadow: 0 6px 18px rgba(0,0,0,0.45);
      user-select: none;
    }
    @keyframes floatUp {
      0% { transform: translateY(0) rotate(0deg) scale(0.7); opacity: 0; }
      8% { opacity: 1; }
      70% { opacity: 1; }
      100% { transform: translateY(-160vh) rotate(360deg) scale(1.05); opacity: 0; }
    }
    /* sparkle */
    .spark {
      position: fixed;
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, #fff, rgba(255,255,255,0.6) 30%, rgba(255,255,255,0.05) 60%);
      z-index:4;
      pointer-events:none;
      animation: floatUp linear forwards;
    }

    /* small responsiveness */
    @media (max-width:480px){
      .center{ padding:18px; top:44% }
      .center h1{ font-size: clamp(20px, 9vw, 34px); }
      .subtitle{ font-size:13px }
      .footer{ font-size:11px }
    }
  </style>
</head>
<body>
  <div class="center" id="card">
    <h1 id="title">Ch√†o b·∫°n ‚ù§Ô∏è</h1>
    <p class="subtitle" id="subtitle">M·∫πo: thay ƒë·ªïi n·ªôi dung ch√≠nh b·∫±ng c√°ch th√™m <code>?text=T√™n c·ªßa b·∫°n</code> v√†o URL</p>
    <p class="footer">T·∫°o b·∫±ng tr√°i tim ph√°t s√°ng ¬∑ Responsive ¬∑ Ho·∫°t ·∫£nh m∆∞·ª£t</p>
  </div>

<script>
  // --- L·∫•y text t·ª´ query param ?text=
  function getQueryText() {
    try {
      const params = new URLSearchParams(location.search);
      const raw = params.get('text') || params.get('name') || params.get('q') || '';
      return decodeURIComponent(raw).trim().slice(0, 120);
    } catch(e){ return ''; }
  }
  const userText = getQueryText();
  const titleEl = document.getElementById('title');
  const subtitleEl = document.getElementById('subtitle');
  if (userText) {
    titleEl.textContent = userText;
    subtitleEl.textContent = "Ch√∫c b·∫°n m·ªôt ng√†y th·∫≠t ·∫•m √°p üíñ";
  }

  // container (for removal safety)
  const container = document.body;

  // helper random
  function rand(min, max){ return Math.random()*(max-min)+min; }
  const heartVariants = ['‚ù§Ô∏è','üíñ','üíò','üíó','üíï','‚ù£Ô∏è','üíù'];

  function createHeart(leftPercent){
    const heart = document.createElement('div');
    heart.className = 'heart';
    heart.textContent = heartVariants[Math.floor(Math.random()*heartVariants.length)];
    const size = Math.floor(rand(20, 56)); // size
    heart.style.fontSize = size + 'px';
    const left = (typeof leftPercent === 'number') ? leftPercent : rand(5,95);
    heart.style.left = left + 'vw';
    const duration = rand(6, 12); // seconds
    heart.style.animationDuration = duration + 's';
    // slight horizontal drift using translateX in style (random)
    const rotate = (rand(-40,40)).toFixed(0);
    heart.style.transform = `translateY(0) rotate(${rotate}deg) scale(${(size/40).toFixed(2)})`;
    heart.style.opacity = 0;
    container.appendChild(heart);

    // remove after animation end (duration + small buffer)
    setTimeout(()=>{
      try{ container.removeChild(heart); }catch(e){}
    }, (duration + 0.6) * 1000);

    return heart;
  }

  function createSpark(leftPercent){
    const s = document.createElement('div');
    s.className = 'spark';
    const left = (typeof leftPercent === 'number') ? leftPercent : rand(4,96);
    s.style.left = left + 'vw';
    const size = rand(4,10);
    s.style.width = s.style.height = size + 'px';
    const dur = rand(5,10);
    s.style.animationDuration = dur + 's';
    container.appendChild(s);
    setTimeout(()=>{ try{ container.removeChild(s);}catch(e){} }, (dur+0.5)*1000);
    return s;
  }

  // spawn continuously but faster & more frequent
  const spawnInterval = setInterval(createHeart, 280); // every 0.28s
  const spawnSparkInterval = setInterval(createSpark, 900);

  // spawn a burst on load (more hearts instantly)
  for(let i=0;i<60;i++){
    setTimeout(()=> createHeart(rand(5,95)), i*60);
  }

  // click to spawn a short burst
  document.addEventListener('click', (e)=>{
    for(let i=0;i<20;i++){ setTimeout(()=> createHeart((e.clientX/window.innerWidth)*100 + rand(-6,6)), i*30); }
  });

  // optional: subtle parallax
  document.addEventListener('mousemove', (ev)=>{
    const cx = window.innerWidth/2, cy = window.innerHeight/2;
    const dx = (ev.clientX - cx) / cx;
    const dy = (ev.clientY - cy) / cy;
    document.getElementById('card').style.transform = `translate(-50%,-50%) translate(${dx*8}px, ${dy*8}px)`;
  });

  // free resources when leaving page
  window.addEventListener('beforeunload', ()=>{
    clearInterval(spawnInterval);
    clearInterval(spawnSparkInterval);
  });
</script>
</body>
</html>
